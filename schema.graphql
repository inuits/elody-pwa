scalar Void

enum MetaKey {
  title
  type
  collection
  description
  material
}

enum RelationType {
  authoredBy
  isIn
  isTypeOf
  contains
  parent
  components
}

enum JSPatchOp {
  add
  replace
  remove
}

input JSPatch {
  op: JSPatchOp!
  path: [String!]!
  value: String!
}

type Metadata {
  key: MetaKey!
  value: String!
  lang: String
}

input MetadataInput {
  key: MetaKey!
  value: String!
  lang: String
}

input RelationInput {
  key: String
  type: RelationType
  label: String
}

type Entity {
  id: String!
  type: String!
  metadata(key: [MetaKey]): [Metadata]!
  relations(key: [RelationType!]): [Relation]
  mediafiles: [MediaFile]
  components: [Entity]
  parents: [Entity]
}

type MediaFile {
  _id: String!
  original_file_location: String
  thumbnail_file_location: String
  entities: [String]
}

type Relation {
  key: String!
  type: RelationType!
  label: String
}

type EntitiesResults {
  results: [Entity]
  count: Int
  limit: Int
}

input SearchFilter {
  value: String
  isAsc: Boolean
  key: String
  raw: Boolean
  relation_filter: [String]
}

type User {
  id: String!
  email: String!
  family_name: String!
  given_name: String!
  name: String!
  preferred_username: String!
}

type Directory {
  id: String
  label: String
  parent: String!
}

type ImportReturn {
  message_id: String
}

type Job {
  job_type: String
  job_info: String
  status: String
  user: String
  asset_id: String
  mediafile_id: String
  parent_job_id: String
  end_time: String
  start_time: String
  amount_of_jobs: Int
  completed_jobs: Int
  _id: String
  _key: String
  _rev: String
  sub_jobs: [Job]
}

type JobsResults {
  results: [Job]
  count: Int
  limit: Int
  next: String
}

input PaginationInfo {
  limit: Int
  skip: Int
}

enum JobType {
  All
  MediaFile
  CSVImport
  FileUpload
}

input Filters {
  query: String
  type: String!
}

type Query {
  Entity(id: String!): Entity
  Entities(
    limit: Int
    skip: Int
    searchValue: SearchFilter!
    fetchPolicy: String
  ): EntitiesResults
  User: User
  Directories: [Directory]
  Jobs(paginationInfo: PaginationInfo, filters: Filters): JobsResults
  Job(id: String!): Job
}

type Mutation {
  replaceMetadata(id: String!, metadata: [MetadataInput!]!): [Metadata!]!
  StartImport(folder: String!): ImportReturn
  addRelations(id: String!, relations: [RelationInput!]!): [Relation]!
}
